#!/usr/bin/env node
import createWaffle from '../src/create-waffle.min.js';import path from 'path';import{fileURLToPath}from 'url';import{dirname}from 'path';import pc from 'picocolors';const PATHS={self:fileURLToPath(import.meta.url),base:null,};const COMMANDS={cd:(dir)=>`cd ${dir}`,install:'npm install',start:'npm run dev',};class CLI{static async initialize(){PATHS.base=dirname(PATHS.self);process.on('unhandledRejection',this.handleError);process.on('uncaughtException',this.handleError)}
static handleError(error){console.error(pc.red('Fatal error:'),error.message);process.exit(1)}
static getNextSteps(projectPath){const steps=[];if(path.resolve(process.cwd())!==path.resolve(projectPath)){steps.push(COMMANDS.cd(path.relative(process.cwd(),projectPath)))}
steps.push(COMMANDS.install,COMMANDS.start);return steps}
static showNextSteps(steps){console.log(pc.blue(pc.bold('Next steps:')));steps.forEach(step=>console.log(pc.white(`  ${step}`)));console.log()}
static async run(){try{await this.initialize();const projectPath=await createWaffle();const nextSteps=this.getNextSteps(projectPath);this.showNextSteps(nextSteps);process.exit(0)}catch(error){this.handleError(error)}}}
CLI.run()